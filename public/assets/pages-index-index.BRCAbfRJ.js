import{S as t,s as e,r as a,c as i,w as s,n as o,i as n,o as r,a as p}from"./index-BRq6JGeD.js";import{P as h,d}from"./index.DHZtHOw1.js";import{_ as l}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-icon.BjjpM4cq.js";import"./uni-app.es.eRxYrI1e.js";import"./index.CoeNstdz.js";import"./index.CD8gkcm5.js";import"./cart.B3GP1kqe.js";import"./index.Dyev38lT.js";import"./index.BoxyUShw.js";import"./mp-html.ClMv_aOj.js";import"./myCoupon.Dcy0qf02.js";const c=l({components:{Page:h,PrivacyPopup:l({emits:["end"],props:{hideTabBar:{type:Boolean,default:!1}},data:()=>({showPrivacy:!1,storeInfo:void 0}),async created(){await this.getStoreInfo()},methods:{async getStoreInfo(){await t.storeInfo().then((t=>this.storeInfo=t))},needAuthorization(){const t=this;uni.getPrivacySetting({success({needAuthorization:e,privacyContractName:a}){console.info("getPrivacySetting",{needAuthorization:e,privacyContractName:a}),e?(t.showPrivacy=!0,t.hideTabBar&&uni.hideTabBar()):t.$emit("end")}})},handlePrivacyContract(){uni.openPrivacyContract()},handleAgreePrivacyAuthorization(){this.hideTabBar&&uni.showTabBar(),this.showPrivacy=!1,this.$emit("end")},handleDisagree(){this.$toast("很抱歉，请先同意后可继续使用~",2e3)}}},[["render",function(t,e,a,i,s,o){return null}],["__scopeId","data-v-b9ba2421"]])},data:()=>({options:{},page:{},items:[]}),onLoad(t){this.options=t,this.getPageData()},onShow(){e()},methods:{getPageData(t){const e=this,a=e.options.pageId||0;d(a).then((t=>{const{data:{pageData:a}}=t;e.page=a.page,e.items=a.items,e.setPageBar()})).finally((()=>t&&t()))},setPageBar(){const{page:t}=this;uni.setNavigationBarTitle({title:t.params.title}),uni.setNavigationBarColor({frontColor:"white"===t.style.titleTextColor?"#ffffff":"#000000",backgroundColor:t.style.titleBackgroundColor})}},onPullDownRefresh(){this.getPageData((()=>{uni.stopPullDownRefresh()}))},onShareAppMessage(){const{page:t}=this;return{title:t.params.shareTitle,path:"/pages/index/index?"+this.$getShareUrlParams()}},onShareTimeline(){const{page:t}=this;return{title:t.params.shareTitle,path:"/pages/index/index?"+this.$getShareUrlParams()}}},[["render",function(t,e,h,d,l,c){const m=a("Page"),g=n;return r(),i(g,{class:"container",style:o(t.appThemeStyle)},{default:s((()=>[p(m,{items:l.items},null,8,["items"])])),_:1},8,["style"])}],["__scopeId","data-v-3e4afae4"]]);export{c as default};
