import{E as e,aa as a,T as n,a3 as t}from"./index-3b24b149.js";const r=new e([{key:"WECHAT",name:"微信支付",value:"wechat"},{key:"ALIPAY",name:"支付宝支付",value:"alipay"},{key:"BALANCE",name:"余额支付",value:"balance"}]),o=new e([{key:"APP",name:"APP端",value:"APP"},{key:"H5",name:"H5端",value:"H5"},{key:"MP_WEIXIN",name:"微信小程序端",value:"MP-WEIXIN"}]),i=e=>{const a={formHtml:"",...e};return new Promise(((e,n)=>{if(a.formHtml){const e=document.createElement("div");e.innerHTML=a.formHtml,document.body.appendChild(e),document.forms[0].submit()}}))},u=e=>new Promise(((a,n)=>{uni.requestPayment({provider:"alipay",orderInfo:e.orderInfo,success(n){const t={isRequireQuery:!0,outTradeNo:e.out_trade_no,method:"alipay"};a({res:n,option:t})},fail:e=>n(e)})})),s=e=>({[o.H5.value]:i,[o.APP.value]:u}[a](e)),m=()=>{const e={};return e.returnUrl=window.location.href,e},p=()=>{const e=d();return e.method&&"alipay.trade.wap.pay.return"===e.method?{method:r.ALIPAY.value,outTradeNo:e.out_trade_no}:null},d=()=>{const e=n();return e[e.length-1].$route.query},c=e=>{const a={timeStamp:"",nonceStr:"",package:"",signType:"",paySign:"",...e};return new Promise(((e,n)=>{uni.requestPayment({provider:"wxpay",timeStamp:a.timeStamp,nonceStr:a.nonceStr,package:a.package,signType:a.signType,paySign:a.paySign,success(n){const t={isRequireQuery:!0,outTradeNo:a.out_trade_no,method:"wechat"};e({res:n,option:t})},fail:e=>n(e)})}))},l=e=>{const a={orderKey:null,mweb_url:"",h5_url:"",...e};return t.set("tempUnifyData_"+a.orderKey,{method:r.WECHAT.value,outTradeNo:a.out_trade_no},3600),new Promise(((e,n)=>{const t=a.mweb_url||a.h5_url;t&&(window.location.href=t)}))},y=e=>new Promise(((a,n)=>{uni.requestPayment({provider:"wxpay",orderInfo:{partnerid:e.partnerid,appid:e.appid,package:"Sign=WXPay",noncestr:e.noncestr,sign:e.sign,prepayid:e.prepayid,timestamp:e.timestamp},success(n){a({res:n,option:{isRequireQuery:!0,outTradeNo:e.out_trade_no,method:"wechat"}})},fail:e=>n(e)})})),P=e=>({[o.H5.value]:l,[o.MP_WEIXIN.value]:c,[o.APP.value]:y}[a](e)),w=()=>({}),f=e=>{if(window.performance&&2==window.performance.navigation.type){const a=t.get("tempUnifyData_"+e);if(a)return t.remove("tempUnifyData_"+e),a}return null};export{r as P,f as a,w as b,s as c,P as d,m as e,p};
